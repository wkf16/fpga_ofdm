# fpga_ofdm

本项目用于基于 FPGA 的 OFDM（正交频分复用）调制与解调实现。

### Todo

- [ ] 发射机
  - [x] 完成fork内容的编译
  - [ ] 数字混频模块
    - [ ] 仿真
    - [ ] 计算K
  - [ ] 输出DAC
- [ ] 接收机

## OFDM 发射路径信号/模块总览表

| 顺序 | 模块名           | 功能                     | 信号/端口名                   | 位宽                      | 含义                                     |
| ---- | ---------------- | ------------------------ | ----------------------------- | ------------------------- | ---------------------------------------- |
| 0    | `x_in`           | 原始比特输入             | `x_in`                        | `1 bit`                   | 输入原始比特流（串行）                   |
| 1    | `Encoder.v`      | 卷积编码器               | `encoder_out`                 | `1 bit`                   | 卷积编码后的比特                         |
|      |                  |                          | `encoder_esig`                | `1 bit`                   | 编码完成后的使能信号                     |
| 2    | `Mod.v`          | QPSK 调制器              | `mod_outx` / `mod_outy`       | `signed [15:0]`           | 调制后复数符号的坐标(x,y)                |
| 3    | `fft_register.v` | 调制符号缓存器           | `reg_out_x` / `reg_out_y`     | `signed [15:0]`           | 已缓存完的 64 点 QPSK 符号，供 IFFT 使用 |
| 4    | `IFFT64.v`       | 64 点 IFFT，生成OFDM符号 | `ifft_out_re` / `ifft_out_im` | `signed [15:0]`           | IFFT 输出的时域复数信号（未加 CP）       |
| 5    | `ADD_CP.v`       | 添加循环前缀（CP）       | `cp_out_re` / `cp_out_im`     | `signed [15:0]`           | 添加 CP 后的时域复数信号，准备发射       |
| 6    | ？？？           | 数字混频（未实现）       | `smixed[n]`                   | `signed [11:0]`～`[15:0]` | 用于变频上转换，输出 DAC 所需实数信号    |
|      |                  |                          |                               |                           |                                          |

## **数字混频**

$smixed[n]=K⋅(I[n]⋅cosd[n]−Q[n]⋅sind[n])$​
其中缩放因子：$K = ？$

- $B$         DAC 的输出位宽（如 `B=12` 表示 `signed [11:0]` 输出范围为 $[-2048, +2047]$） 
- $N$        系统中 I/Q 信号的位宽 



wkf、hhl
